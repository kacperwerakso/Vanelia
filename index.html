<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Redirect...</title>
</head>
<body>
  <p>Przekierowuję… jeśli nic się nie dzieje, kliknij <a id="link" href="#">tutaj</a>.</p>
  <script>
    fetch('target.txt', {cache: "no-store"})
      .then(r => {
        if (!r.ok) throw new Error('Brak pliku target.txt');
        return r.text();
      })
      .then(text => {
        const target = text.trim();
        if (!target) throw new Error('Pusty target');
        try {
          const u = new URL(target);
          window.location.replace(u.href);
        } catch(e) {
          document.getElementById('link').href = target;
          document.getElementById('link').textContent = 'Otwórz ręcznie: ' + target;
        }
      })
      .catch(err => {
        console.error(err);
        document.querySelector('p').textContent = 'Błąd przekierowania.';
      });
  </script>
</body>
</html>
